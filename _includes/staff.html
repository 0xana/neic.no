{% assign previous = '' %}
{% assign sorted = site.people | sort: 'country'%}
{% assign n_on_contract = 0 %}
{% capture list_items %}
  {% for person in sorted %}
    {% unless person.on_contract %}{% continue %}{% endunless %}
    {% assign n_on_contract = n_on_contract | plus: 1 %}
    {% unless person.country == previous %}
      {% assign previous = person.country %}
      <h5>{{ previous }}</h5>
    {% endunless %}
    <li><a href="{{ site.baseurl }}{{ person.url }}">{{ person.name }}</a> - {{ person.home }}</li>
  {% endfor %}
{% endcapture %}
<div class="container mtt">
  <div class="row">
    <div class="col-lg-12">
      {{ content }}

      <h2>Staff</h2>
      {{ n_on_contract }} people.
      <ul>
        {{ list_items }}
      </ul>
    </div>
  </div>
</div>
