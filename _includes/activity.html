{% assign this_activity = page.path | replace: '_activities/', ''  | replace: '.md', '' %}

<div class="container mtt">
  <div class="row">
    <div class="col-lg-12">
      <h2>{{ page.name }}</h2>

      <div style="border: 1px solid gray;">
        <h5>{{ page.type }}</h5>
        {% if page.phase %}<p>Phase: {{ page.phase }}</p>{% endif %}
        <p>
          Period:
          {% if page.start %}
            {{ page.start }} &mdash; {{ page.end }}
          {% else %}
            TBD
          {% endif %}
        </p>
        {% assign leader_path = "_people/" | append: page.leader | append: ".md" %}
        {% assign leader = site.people | where:"path", leader_path  | first %}
        <p>Leader: <a href="{{ site.baseurl }}{{ leader.url }}">{{ leader.name }}</a></p>
        <p>
          <ul>
            {% unless page.results == "N/A" %}<li><a href="{{ page.results | default: "#results" }}">Results</a></li>{% endunless %}
            {% unless page.outreach == "N/A" %}<li><a href="{{ page.outreach | default: "#outreach" }}">Outreach</a></li>{% endunless %}
          </ul>
        </p>

        {% if page.links %}
        <h5>Links</h5>
        <ul>
          {% for link in page.links %}
            <li><a href="{{ link.url }}">{{ link.text | default: link.url }}</a>{% if link.description %}. {{ link.description }}{% endif %}</li>
          {% endfor %}
        </ul>
        {% endif %}

        {% if page.documents %}
        <h5>Documents</h5>
        <ul>
          {% for link in page.documents %}
            <li><a href="{{ link.url }}">{{ link.text | default: link.url }}</a>{% if link.description %}. {{ link.description }}{% endif %}</li>
          {% endfor %}
        </ul>
        {% endif %}

        {% if page.outcome-statements %}
        <h5>Outcome statements</h5>
        <p>Visions and best-case-scenarios.</p>
        <ul>
          {% for statement in page.outcome-statements %}
            <li>{{ statement }}</li>
          {% endfor %}
        </ul>
        {% endif %}

      </div>

      {{ content }}

      <h3>People</h3>
      {% for group in page.groups %}
        <h4>{{ group[1].name }}</h4>
        {% if group[1].description %}<p>{{ group[1].description }}</p>{% endif %}
        {% if group[1].minutes %}
          <p>Minutes:
            <a href="{{ group[1].minutes }}">{{ group[1].name }} meeting minutes</a>{% if group[1].frequency %}, {{ group[1].frequency }}{% endif %}.
          </p>
        {% endif %}
        <ul>
          {% for person in site.people %}
            {% for person_group in person.groups %}
              {% if person_group[0] == group[0] %}
                {% unless person_group[1].finished %}
                  <li>
                    <a href="{{ site.baseurl }}{{ person.url }}">{{ person.name }}</a>,
                    {{ person.country }}{% if person_group[1].role %},
                      {{ person_group[1].role }}
                    {% endif %}
                  </li>
                {% endunless %}
              {% endif %}
            {% endfor %}
          {% endfor %}
        </ul>
      {% endfor %}
      {% if page.outreach-tag %}
      <h3>Outreach</h3>
      <script src="{{ site.baseurl }}/assets/js/gcal-events.js"></script>
      <span class="event-list">
        <script>
        function foo(widget) {
          var calendarid = "sdmmpsbtk54hdvob60rjhfnnvo%40group.calendar.google.com";
          var key = "AIzaSyCgPT9r5VFeFpxFkcPNCR7ae-wAnGE9684";
          document.addEventListener("DOMContentLoaded", function(event) {
            renderEvents(widget, calendarid, key, false, "{{ page.outreach-tag }}", "");
          });
        }
        foo(document.scripts[document.scripts.length - 1].parentNode);
        </script>
      </span>
      <h4>Past</h4>
      <span class="event-list">
        <script>
        function foo(widget) {
          var calendarid = "sdmmpsbtk54hdvob60rjhfnnvo%40group.calendar.google.com";
          var key = "AIzaSyCgPT9r5VFeFpxFkcPNCR7ae-wAnGE9684";
          document.addEventListener("DOMContentLoaded", function(event) {
            renderEvents(widget, calendarid, key, true, "{{ page.outreach-tag }}", "");
          });
        }
        foo(document.scripts[document.scripts.length - 1].parentNode);
        </script>
      </span>

      {% endif %}
    </div>
  </div>
</div>
